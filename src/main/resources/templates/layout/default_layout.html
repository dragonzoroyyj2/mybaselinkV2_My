<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title th:text="${title} ?: 'MyBaseLink'">MyBaseLink</title>

  <!-- ✅ CSRF Token -->
  <th:block th:if="${_csrf} != null">
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
  </th:block>

  <!-- ✅ 폰트 및 아이콘 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- ✅ 파비콘 (모든 플랫폼 대응) -->
  <link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/favicon/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <!-- ✅ 공통 CSS 로드 순서 (v12.6 기준) -->
  <link rel="stylesheet" href="/css/common/commonLayout.css">      <!-- ① 전체 레이아웃 / 버튼 / 모달 -->
  <link rel="stylesheet" href="/css/common/commonTable.css">       <!-- ② 테이블 / 로딩오버레이 / 체크박스 -->
  <link rel="stylesheet" href="/css/common/commonSearch.css">      <!-- ③ 검색창 / 필터 전용 -->
  <link rel="stylesheet" href="/css/common/commonPagination.css">  <!-- ④ 페이징 버튼 전용 -->
  <link rel="stylesheet" href="/css/common/commonModal.css">
  <link rel="stylesheet" href="/css/common/commonToast.css">

</head>

<body>

  <!-- ✅ 상단 -->
  <th:block th:replace="~{fragments/top :: topFragment}"></th:block>

  <!-- ✅ 오버레이 -->
  <div id="sidebarOverlay"></div>

  <!-- ✅ 왼쪽 메뉴 -->
  <div th:replace="~{fragments/left :: leftFragment}"></div>

  <!-- ✅ 메인 콘텐츠 -->
  <main>
    <div class="content" layout:fragment="content"></div>
  </main>

  <!-- ✅ 하단 -->
  <footer th:replace="~{fragments/bottom :: bottomFragment}"></footer>

  <!-- ✅ 전역 사이드바 토글 -->
  <script>
  /*
  | 구분          | 화면폭(px)          | 디바이스 예시             | 반응형 목적               		|
	| ----------- 	| ------------------- | ------------------------- | -------------------- 				|
	| **초소형폰**  | `max-width: 360px`  | iPhone SE, Galaxy A10e    | 최소 대응 (기본 텍스트/버튼 축소) |
	| **소형폰**    | `max-width: 480px`  | Galaxy S8, iPhone 12 mini | 모바일 세로 모드 기준         	|
	| **중형폰**    | `max-width: 768px`  | 대부분 스마트폰, 세로     | 레이아웃 여백, 폰트 자동조정     |
	| **태블릿**    | `max-width: 1024px` | iPad, Galaxy Tab 세로     | 리스트/폼 폭 조절           		|
	| **데스크탑 기본** | `> 1024px`      | 노트북/PC             	 | 기본 레이아웃 유지           		|

*/
  
  
  
    document.addEventListener("DOMContentLoaded", () => {
      const sidebar = document.querySelector(".sidebar");
      const overlay = document.getElementById("sidebarOverlay");

      window.toggleSidebar = () => {
        if (!sidebar || !overlay) return;
        const isOpen = sidebar.classList.contains("open");
        sidebar.classList.toggle("open", !isOpen);
        overlay.classList.toggle("active", !isOpen);
        overlay.style.display = !isOpen ? "block" : "none";
      };

      overlay?.addEventListener("click", () => {
        sidebar.classList.remove("open");
        overlay.classList.remove("active");
        overlay.style.display = "none";
      });

      overlay.style.display = "none";
    });
  </script>

  <!-- ✅ 공용 스크립트 -->
  <script src="/js/common/common_loadseq_1_Loading_op.js"></script>
  <script src="/js/common/common_loadseq_2_Notify.js"></script>
  <script src="/js/common/common_loadseq_3_Pagination_op.js"></script>
  <script src="/js/common/common_loadseq_4_Modal_op.js"></script>
  <script src="/js/common/common_loadseq_5_UnifiedList_op.js"></script>


  <!-- ✅ 페이지별 스크립트 주입 -->
  <th:block layout:fragment="pageScript"></th:block>

  <!-- ✅ 자동 헤더 높이 반영 스크립트 -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const header = document.querySelector(".top-bar");
      const main = document.querySelector("main");

      function adjustMainMargin() {
        if (header && main) {
          const h = header.offsetHeight || 0;
          main.style.marginTop = `${h}px`;
        }
      }

      adjustMainMargin();
      window.addEventListener("resize", adjustMainMargin);
    });
  </script>

</body>
</html>
