<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ“Š Python ìŠ¤í¬ë¦½íŠ¸ ê´€ë¦¬</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
    :root { font-family: 'Inter', sans-serif; }

    .custom-scroll::-webkit-scrollbar { width: 8px; }
    .custom-scroll::-webkit-scrollbar-thumb { background-color: #a0aec0; border-radius: 4px; }
    .custom-scroll::-webkit-scrollbar-track { background-color: #edf2f7; }

    .file-row-new { border-left: 4px solid #3b82f6; background: #eff6ff; }
    .file-row-new:hover { background: #dbeafe; }

    .file-row-normal:hover { background: #f9fafb; }

    .fade-in { animation: fadeIn 0.25s ease-in-out; }
    @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
</style>
</head>

<body>
<div layout:fragment="content">
    <div class="content-container p-4 md:p-6 lg:p-8">

        <!-- í˜ì´ì§€ HEADER -->
        <div class="page-header mb-8 pb-4 border-b border-gray-200">
            <div>
                <h2 class="text-3xl font-extrabold text-gray-800 sm:text-2xl">
                    ğŸ Python ìŠ¤í¬ë¦½íŠ¸ ê´€ë¦¬
                </h2>
            </div>
            <div class="breadcrumb text-sm text-gray-500 mt-1">
                <i class="fas fa-folder-open text-blue-500 mr-1"></i>
                ì‹œìŠ¤í…œ / ë°°ì¹˜ ê´€ë¦¬ / Python
            </div>
        </div>


        <!-- 3ì—´ GRID -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <!-- ì—…ë¡œë“œ ì¹´ë“œ -->
            <div class="lg:col-span-1">
                <div class="bg-white p-6 rounded-xl shadow-lg border h-full fade-in">

                    <h3 class="text-xl font-semibold text-blue-700 mb-4 flex items-center">
                        <i class="fas fa-upload mr-2"></i>
                        ìŠ¤í¬ë¦½íŠ¸ ì—…ë¡œë“œ / ì—…ë°ì´íŠ¸
                    </h3>

                    <p class="text-sm text-gray-600 mb-2">ë¡œì»¬ Python(.py) íŒŒì¼ì„ ì„œë²„ ìš´ì˜ ê²½ë¡œì— ì—…ë¡œë“œí•©ë‹ˆë‹¤.</p>

                    <div class="text-xs text-red-500 mb-6 break-words">
                        ìš´ì˜ ë°°í¬ ê²½ë¡œ:
                        <span th:text="${pythonWorkingDir}"
                              class="font-medium text-red-700"></span>
                    </div>

                    <form id="uploadForm" enctype="multipart/form-data" class="space-y-4">

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">íŒŒì¼ ì„ íƒ (.py)</label>

                            <div id="dropZone"
                                 class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer
                                        hover:border-blue-500 transition bg-gray-50/50">

                                <p class="text-gray-500 text-sm mb-2">
                                    <i class="fas fa-file mr-1"></i>
                                    ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒ
                                </p>

                                <input type="file" id="fileInput" name="file" multiple accept=".py" class="hidden" />
                                <div id="fileListPreview" class="mt-3 space-y-1 text-left"></div>
                            </div>
                        </div>

                        <button id="uploadButton" type="submit"
                                class="w-full py-2 px-4 rounded-lg shadow-md text-sm font-medium text-white
                                       bg-blue-600 hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center">
                            <i class="fas fa-upload mr-2"></i>
                            ì—…ë¡œë“œ
                        </button>
                    </form>

                    <div id="statusMessage"
                         class="mt-4 p-3 rounded-lg text-sm hidden"></div>

                </div>
            </div>
            
            <!-- íŒŒì¼ ëª©ë¡ ì¹´ë“œ -->
            <div class="lg:col-span-2">
                <div class="bg-white p-6 rounded-xl shadow-lg border h-full fade-in">

                    <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center justify-between">
                        <span>
                            <i class="fas fa-file-code mr-2"></i> ì„œë²„ Python ìŠ¤í¬ë¦½íŠ¸ ëª©ë¡
                        </span>

                        <button id="refreshButton"
                                class="p-2 rounded-lg text-gray-500 hover:text-blue-600 hover:bg-gray-100 transition text-sm sm:text-base"
                                title="ëª©ë¡ ìƒˆë¡œê³ ì¹¨">
                            <i class="fas fa-sync-alt mr-1"></i>
                            <span class="hidden sm:inline">ìƒˆë¡œê³ ì¹¨</span>
                        </button>
                    </h3>

                    <!-- í…Œì´ë¸” -->
                    <div class="overflow-x-auto custom-scroll h-96">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50 sticky top-0 z-10">
                                <tr>
                                    <th class="px-3 py-3 text-center w-10">
                                        <input type="checkbox" id="selectAllFiles"
                                               class="h-4 w-4 text-blue-600 border-gray-300 rounded cursor-pointer">
                                    </th>
                                    <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase w-12">#</th>
                                    <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase">íŒŒì¼ëª…</th>
                                    <!-- ìƒˆ í•­ëª©: í¬ê¸° -->
                                    <th class="px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase">í¬ê¸°</th>
                                    <!-- ê¸°ì¡´ í•­ëª© -->
                                    <th class="px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase">
                                        ì—…ë¡œë“œ ë‚ ì§œ
                                    </th>
                                    <!-- ìƒˆ í•­ëª©: í•´ì‹œ -->
                                    <th class="px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase">
                                        SHA-256 í•´ì‹œ
                                    </th>
                                    <!-- ê¸°ì¡´ í•­ëª© -->
                                    <th class="px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase">
                                        <i class="fas fa-magic"></i> New
                                    </th>
                                    <th class="px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase">ê´€ë¦¬</th>
                                </tr>
                            </thead>

                            <tbody id="fileListBody" class="bg-white divide-y divide-gray-100">
                                <tr>
                                    <!-- colspan=6ì—ì„œ 8ë¡œ ë³€ê²½ë¨ -->
                                    <td colspan="8" class="px-6 py-4 text-center text-gray-500">
                                        <i class="fas fa-spinner fa-spin mr-2"></i> ë¡œë”© ì¤‘...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- ë‹¤ì¤‘ë²„íŠ¼ -->
                    <div class="mt-4 flex justify-end space-x-3 border-t pt-4">

                        <button id="deploySelectedButton"
                                class="inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm
                                       text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50">
                            <i class="fas fa-rocket mr-2"></i> ì„ íƒ ë°°í¬
                        </button>

                        <button id="runSelectedButton"
                                class="inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm
                                       text-white bg-green-600 hover:bg-green-700 disabled:opacity-50">
                            <i class="fas fa-play mr-2"></i> ì„ íƒ ì‹¤í–‰
                        </button>

                        <button id="deleteSelectedButton"
                                class="inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm
                                       text-white bg-red-600 hover:bg-red-700 disabled:opacity-50">
                            <i class="fas fa-trash mr-2"></i> ì„ íƒ ì‚­ì œ
                        </button>

                    </div>
                </div>
            </div>

        </div> <!-- GRID END -->

    </div>
</div>

<th:block layout:fragment="pageScript">
<script th:inline="javascript">
/*<![CDATA[*/

document.addEventListener('DOMContentLoaded', () => {

    const fileListBody          = document.getElementById('fileListBody');
    const uploadForm            = document.getElementById('uploadForm');
    const fileInput             = document.getElementById('fileInput');
    const uploadButton          = document.getElementById('uploadButton');
    const statusMessage         = document.getElementById('statusMessage');
    const refreshButton         = document.getElementById('refreshButton');

    const selectAllFiles        = document.getElementById('selectAllFiles');
    const runSelectedButton     = document.getElementById('runSelectedButton');
    const deleteSelectedButton  = document.getElementById('deleteSelectedButton');
    const deploySelectedButton  = document.getElementById('deploySelectedButton');

    const dropZone              = document.getElementById('dropZone');
    const fileListPreview       = document.getElementById('fileListPreview');

    let selectedFiles           = [];
    let currentFiles            = [];
    
    /* ============================================================
       ìœ í‹¸ë¦¬í‹°: ë°”ì´íŠ¸ í¬ê¸°ë¥¼ ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ í˜•íƒœë¡œ ë³€í™˜
    ============================================================ */
    function formatBytes(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    /* ============================================================
       ê³µí†µ ì•Œë¦¼ ë©”ì‹œì§€ í‘œì‹œ
    ============================================================ */
    function displayStatus(message, type) {
        statusMessage.textContent = message;
        statusMessage.className = 'mt-4 p-3 rounded-lg text-sm fade-in';

        if (type === 'success') {
            statusMessage.classList.add('bg-green-100', 'text-green-700', 'border', 'border-green-300');
        } else if (type === 'error') {
            statusMessage.classList.add('bg-red-100', 'text-red-700', 'border', 'border-red-300');
        } else {
            statusMessage.classList.add('bg-gray-100', 'text-gray-700', 'border', 'border-gray-300');
        }

        statusMessage.classList.remove('hidden');
    }

    /* ============================================================
       íŒŒì¼ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
    ============================================================ */
    async function loadFileList() {
        fileListBody.innerHTML =
            `<tr><td colspan="8" class="px-6 py-4 text-center text-gray-500">
                <i class="fas fa-spinner fa-spin mr-2"></i> ë¡œë”© ì¤‘...
            </td></tr>`;

        try {
            const response = await fetch('/api/python/list', {
                method: 'GET',
                headers: { "Content-Type": "application/json" },
                cache: 'no-cache'
            });

            if (!response.ok) {
                throw new Error('ì„œë²„ ì˜¤ë¥˜ (' + response.status + ')');
            }

            currentFiles = await response.json();
            renderFileList(currentFiles);

        } catch (err) {
            fileListBody.innerHTML =
                `<tr><td colspan="8" class="px-6 py-4 text-center text-red-500">
                    ì˜¤ë¥˜: ${err.message}
                </td></tr>`;
        }
    }

    /* ============================================================
       íŒŒì¼ ëª©ë¡ ë Œë”ë§
    ============================================================ */
    function renderFileList(files) {
        if (files.length === 0) {
            fileListBody.innerHTML =
                `<tr><td colspan="8" class="px-6 py-4 text-center text-gray-500">
                    ë°°í¬ëœ ìŠ¤í¬ë¦½íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.
                 </td></tr>`;
            return;
        }

        fileListBody.innerHTML = files.map((file, idx) => {

            const rowClass = file.new
                ? "file-row-new"
                : "file-row-normal";

            const newBadge = file.new
                ? `<span class="px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700">
                        NEW
                   </span>`
                : `<span class="text-xs text-gray-400">-</span>`;
            
            // í¬ê¸° í¬ë§·íŒ…
            const formattedSize = formatBytes(file.size);
            // í•´ì‹œ ê°’ ì¶•ì•½ (ë³´ì•ˆ ë° ê°€ë…ì„±)
            const shortHash = file.localHash ? file.localHash.substring(0, 10) + '...' : 'N/A';


            return `
                <tr class="${rowClass}">
                    <td class="px-3 py-3 text-center">
                        <input type="checkbox" name="fileCheck" value="${file.filename}"
                               class="h-4 w-4 cursor-pointer" onclick="handleFileCheck(this)">
                    </td>

                    <td class="px-3 py-3 text-xs">${idx + 1}</td>

                    <td class="px-3 py-3 text-xs text-blue-700 font-medium">
                        <i class="fas fa-file-code mr-1"></i>${file.filename}
                    </td>
                    
                    <!-- NEW: í¬ê¸° -->
                    <td class="px-3 py-3 text-center text-xs text-gray-600">
                        ${formattedSize}
                    </td>

                    <td class="px-3 py-3 text-center text-xs">${file.uploadDate}</td>

                    <!-- NEW: SHA-256 í•´ì‹œ -->
                    <td class="px-3 py-3 text-center text-xs font-mono" title="${file.localHash || 'í•´ì‹œ ì •ë³´ ì—†ìŒ'}">
                        ${shortHash}
                    </td>

                    <td class="px-3 py-3 text-center">${newBadge}</td>

                    <td class="px-3 py-3 text-center space-x-1">

                        <button onclick="handleScriptAction('${file.filename}', 'run')"
                                class="inline-flex items-center p-2 rounded-md text-green-600 border border-green-300 hover:text-white hover:bg-green-600 transition text-xs">
                            <i class="fas fa-play"></i>
                            <span class="ml-1 hidden sm:inline">ì‹¤í–‰</span>
                        </button>

                        <button onclick="handleScriptAction('${file.filename}', 'delete')"
                                class="inline-flex items-center p-2 rounded-md text-red-600 border border-red-300 hover:text-white hover:bg-red-600 transition text-xs">
                            <i class="fas fa-trash"></i>
                            <span class="ml-1 hidden sm:inline">ì‚­ì œ</span>
                        </button>

                    </td>
                </tr>
            `;
        }).join('');

        updateButtonStates();
        selectAllFiles.checked = false;
    }

    /* ============================================================
       ì²´í¬ë°•ìŠ¤
    ============================================================ */
    window.handleFileCheck = function () {
        const checkboxes = document.querySelectorAll('input[name="fileCheck"]');
        const checkedCnt = document.querySelectorAll('input[name="fileCheck"]:checked').length;

        selectAllFiles.checked = (checkedCnt > 0 && checkedCnt === checkboxes.length);
        updateButtonStates();
    };

    selectAllFiles.addEventListener('change', () => {
        const isChecked = selectAllFiles.checked;
        document.querySelectorAll('input[name="fileCheck"]').forEach(cb => cb.checked = isChecked);
        updateButtonStates();
    });

    function getSelectedFilenames() {
        const arr = [];
        document.querySelectorAll('input[name="fileCheck"]:checked').forEach(cb => arr.push(cb.value));
        return arr;
    }

    function updateButtonStates() {
        const count = document.querySelectorAll('input[name="fileCheck"]:checked').length;
        const disabled = (count === 0);

        runSelectedButton.disabled = disabled;
        deleteSelectedButton.disabled = disabled;
        deploySelectedButton.disabled = disabled;
    }

    /* ============================================================
       ë‹¨ì¼ ì‹¤í–‰ / ì‚­ì œ
    ============================================================ */
    window.handleScriptAction = (filename, action) => {
        // NOTE: alert() ëŒ€ì‹  ì»¤ìŠ¤í…€ ëª¨ë‹¬ ë˜ëŠ” UI ë©”ì‹œì§€ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. 
        // ì—¬ê¸°ì„œëŠ” í¸ì˜ìƒ confirmì„ ì‚¬ìš©í•˜ì§€ë§Œ ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” Custom UIë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.
        if (action === 'run') {
            if (confirm(`[${filename}] ì‹¤í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                executeScript(filename);
            }
        } else if (action === 'delete') {
            if (confirm(`[${filename}] ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                deleteScript(filename);
            }
        }
    };

    async function executeScript(filename) {
        try {
            const response = await fetch(`/api/python/run/${encodeURIComponent(filename)}`, {
                method: 'POST'
            });

            const txt = await response.text();

            if (response.ok) displayStatus(txt, 'success');
            else displayStatus(txt, 'error');

        } catch (err) {
            displayStatus('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ' + err.message, 'error');
        }
    }

    async function deleteScript(filename) {
        try {
            const response = await fetch(`/api/python/delete/${encodeURIComponent(filename)}`, {
                method: 'DELETE'
            });

            const txt = await response.text();

            if (response.ok) {
                displayStatus(txt, 'success');
                loadFileList();
            } else {
                displayStatus(txt, 'error');
            }

        } catch (err) {
            displayStatus('ì‚­ì œ ì˜¤ë¥˜: ' + err.message, 'error');
        }
    }

    /* ============================================================
       ì„ íƒ ì‹¤í–‰ / ì„ íƒ ì‚­ì œ / ì„ íƒ ë°°í¬
    ============================================================ */

    runSelectedButton.addEventListener('click', () => {
        const list = getSelectedFilenames();
        if (list.length === 0) return;
        if (!confirm(`${list.length}ê°œ íŒŒì¼ ì‹¤í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n[${list.join(', ')}]`)) return;
        runBatch(list);
    });

    deleteSelectedButton.addEventListener('click', () => {
        const list = getSelectedFilenames();
        if (list.length === 0) return;
        if (!confirm(`${list.length}ê°œ íŒŒì¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n[${list.join(', ')}]`)) return;
        deleteBatch(list);
    });

    deploySelectedButton.addEventListener('click', () => {
        const list = getSelectedFilenames();
        if (list.length === 0) return;
        if (!confirm(`${list.length}ê°œ íŒŒì¼ì„ DEV ë²„ì „ìœ¼ë¡œ ìš´ì˜ì— ë°°í¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n(ê¸°ì¡´ íŒŒì¼ì€ ë°±ì—…ë¨)`)) return;
        deployBatch(list);
    });

    async function runBatch(list) {
        try {
            const response = await fetch('/api/python/batch-run', {
                method: 'POST',
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(list)
            });

            const txt = await response.text();

            if (response.ok) displayStatus(txt, 'success');
            else displayStatus(txt, 'error');

        } catch (err) {
            displayStatus('ì˜¤ë¥˜: ' + err.message, 'error');
        }
    }

    async function deleteBatch(list) {
        try {
            const response = await fetch('/api/python/batch-delete', {
                method: 'DELETE',
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(list)
            });

            const txt = await response.text();

            if (response.ok) {
                displayStatus(txt, 'success');
                loadFileList();
            } else {
                displayStatus(txt, 'error');
            }

        } catch (err) {
            displayStatus('ì‚­ì œ ì‹¤íŒ¨: ' + err.message, 'error');
        }
    }

    async function deployBatch(list) {
        try {
            const response = await fetch('/api/python/batch-deploy', {
                method: 'POST',
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(list)
            });

            const txt = await response.text();

            if (response.ok) displayStatus(txt, 'success');
            else if (response.status === 206) displayStatus(txt, 'warning');
            else displayStatus(txt, 'error');

            loadFileList();

        } catch (err) {
            displayStatus('ë°°í¬ ì˜¤ë¥˜: ' + err.message, 'error');
        }
    }

    /* ============================================================
       ì—…ë¡œë“œ ê´€ë ¨ ì²˜ë¦¬
    ============================================================ */

    dropZone.addEventListener('click', () => fileInput.click());

    ;['dragenter', 'dragover', 'dragleave', 'drop'].forEach(ev =>
        dropZone.addEventListener(ev, e => {
            e.preventDefault();
            e.stopPropagation();
        })
    );

    dropZone.addEventListener('dragenter', () => {
        dropZone.classList.add('border-blue-500', 'bg-blue-50');
    });

    dropZone.addEventListener('dragleave', () => {
        dropZone.classList.remove('border-blue-500', 'bg-blue-50');
    });

    dropZone.addEventListener('drop', e => {
        dropZone.classList.remove('border-blue-500', 'bg-blue-50');
        setFiles(e.dataTransfer.files);
    });

    fileInput.addEventListener('change', e => setFiles(e.target.files));

    function setFiles(files) {
        selectedFiles = Array.from(files).filter(f => f.name.endsWith('.py'));

        if (selectedFiles.length === 0) {
            displayStatus('.py íŒŒì¼ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');
        }

        updateFilePreview();
    }

    function updateFilePreview() {
        fileListPreview.innerHTML = '';

        if (selectedFiles.length === 0) {
            uploadButton.disabled = true;
            return;
        }

        selectedFiles.forEach(f => {
            const sizeKB = (f.size / 1024).toFixed(1);

            const div = document.createElement('div');
            div.className = "flex justify-between items-center p-2 bg-white rounded border text-xs";
            div.innerHTML =
                `<span class="truncate"><i class="fas fa-file-code mr-1"></i>${f.name}</span>
                 <span class="text-gray-500">${sizeKB}KB</span>`;

            fileListPreview.appendChild(div);
        });

        uploadButton.disabled = false;
    }

    /* ============================================================
       ì—…ë¡œë“œ í¼ ì œì¶œ
    ============================================================ */
    uploadForm.addEventListener('submit', async e => {
        e.preventDefault();

        if (selectedFiles.length === 0) {
            displayStatus('ì—…ë¡œë“œí•  íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.', 'error');
            return;
        }

        uploadButton.disabled = true;
        uploadButton.innerHTML = `<i class="fas fa-spinner fa-spin mr-2"></i> ì—…ë¡œë“œ ì¤‘...`;

        const formData = new FormData();
        selectedFiles.forEach(file => formData.append('files', file));

        try {
            const response = await fetch('/api/python/upload', {
                method: 'POST',
                body: formData
            });

            const txt = await response.text();

            if (response.ok) {
                displayStatus(txt, 'success');
                uploadForm.reset();
                selectedFiles = [];
                updateFilePreview();
                loadFileList();
            } else {
                displayStatus(txt, 'error');
            }

        } catch (err) {
            displayStatus('ì—…ë¡œë“œ ì‹¤íŒ¨: ' + err.message, 'error');
        }

        uploadButton.disabled = false;
        uploadButton.innerHTML = `<i class="fas fa-upload mr-2"></i> ì—…ë¡œë“œ`;
    });

    /* ============================================================
       ì´ˆê¸° ëª©ë¡ ë¡œë“œ
    ============================================================ */
    refreshButton.addEventListener('click', loadFileList);
    loadFileList();
});

/*]]>*/
</script>
</th:block>

</body>
</html>